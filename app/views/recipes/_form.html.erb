<%= form_for(recipe) do |f| %>
  <% if recipe.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(recipe.errors.count, "error") %> prohibited this recipe from being saved:</h2>

      <ul>
      <% recipe.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">
    <%= f.hidden_field :user_id, :value => current_user.id %>
  </div>

  <div class="field">
    <%= f.label :name %>
    <%= f.text_field :name %>
  </div>

  <div class="field">
    <%= f.label :style %>
    <%= f.select :style, options_for_select(generate_style_options, :selected => recipe.style), prompt: 'Select a style' %>
  </div>

  <h3>Malts</h3>
  <div class="malt-inputs">
    <%= f.fields_for :recipe_malts do |malt| %>
      <div class="malt-input">
        <div class="field">
          <%= malt.label :malt, :value => "Malts and sugars" %>
          <%= malt.select :malt, options_for_select(options_generator(:malts)) %>
        </div>

        <div class="field">
          <%= malt.label :quantity %>
          <%= malt.text_field :quantity %>g
        </div>

        <div class="field">
          <%= malt.hidden_field :_destroy, :value => false, :class => 'destroy' %>
        </div>

        <div class="field">
          <%= malt.label :remove %>
          <button type="button" class="del-ingredient-btn btn">x</button>
        </div>
      </div>
    <% end %>
  </div>
  <button type="button" class="add-ingredient-btn btn" data-type="malt">+</button>

  <h3>Hops</h3>
  <div class="hop-inputs">
    <%= f.fields_for :recipe_hops do |hop| %>
      <div class="hop-input">

            <div class="field">
              <%= hop.label :hop, :value => "Hops" %>
              <%= hop.select :hop, options_for_select(options_generator(:hops)) %>
            </div>

            <div class="field">
              <%= hop.label :quantity %>
              <%= hop.text_field :quantity %>g
            </div>

        <div class="field">
          <%= hop.hidden_field :_destroy, :value => false, :class => 'destroy' %>
        </div>

        <div class="field">
          <%= hop.label :remove %>
          <button type="button" class="del-ingredient-btn btn">x</button>
        </div>

      </div>
    <% end %>
  </div>
  <button type="button" class="add-ingredient-btn btn" data-type="hop">+</button>

  <h3>Yeast</h3>
  <div class="yeast-inputs">
    <%= f.fields_for :recipe_yeasts do |yeast| %>
      <div class="yeast-input">

        <div class="field">
          <%= yeast.label :yeast, :value => "Yeast" %>
          <%= yeast.select :yeast, options_for_select(options_generator(:yeasts)) %>
        </div>

        <div class="field">
          <%= yeast.hidden_field :_destroy, :value => false, :class => 'destroy' %>
        </div>

        <div class="field">
          <%= yeast.label :remove %>
          <button type="button" class="del-ingredient-btn btn">x</button>
        </div>

      </div>
    <% end %>
  </div>
  <button type="button" class="add-ingredient-btn btn" data-type="yeast">+</button>

  <div class="method field">
    <%= f.label :method %>
    <%= f.text_area :method %>
  </div>

  <div class="actions">
    <%= f.submit :class => 'btn btn-primary' %>
  </div>
<% end %>
